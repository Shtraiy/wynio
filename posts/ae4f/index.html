<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="先前有尝试过用VMware装Archlinux 因为整个系统都是在Cli下一步步引导安装 打算针对只会Windows的完全没接触过GNU&#x2F;Linux的新手写一个零基础安装教学 这回不再使用VMware进行安装，直接上手实机进行EFI引导安装arch 内容可能会有一些错误，如有发现请即刻私信我 我也是没有过这类手动安装linux的经历，如果遇到什么问题也可以找我讨论 另外，尽管这类教程Google上">
<meta property="og:type" content="article">
<meta property="og:title" content="ArchLinux安装指南">
<meta property="og:url" content="https://wynio.online/posts/ae4f/index.html">
<meta property="og:site_name" content="Nocturne">
<meta property="og:description" content="先前有尝试过用VMware装Archlinux 因为整个系统都是在Cli下一步步引导安装 打算针对只会Windows的完全没接触过GNU&#x2F;Linux的新手写一个零基础安装教学 这回不再使用VMware进行安装，直接上手实机进行EFI引导安装arch 内容可能会有一些错误，如有发现请即刻私信我 我也是没有过这类手动安装linux的经历，如果遇到什么问题也可以找我讨论 另外，尽管这类教程Google上">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wynio.online/css/1.jpg">
<meta property="og:image" content="https://wynio.online/css/2.png">
<meta property="og:image" content="https://wynio.online/css/1.png">
<meta property="og:image" content="https://wynio.online/css/3.png">
<meta property="og:image" content="https://wynio.online/css/4.png">
<meta property="og:image" content="https://wynio.online/css/5.png">
<meta property="og:image" content="https://wynio.online/css/38.png">
<meta property="og:image" content="https://wynio.online/css/37.png">
<meta property="og:image" content="https://wynio.online/css/7.png">
<meta property="og:image" content="https://wynio.online/css/39.png">
<meta property="og:image" content="https://wynio.online/css/8.png">
<meta property="og:image" content="https://wynio.online/css/33.png">
<meta property="article:published_time" content="2021-01-26T04:23:19.000Z">
<meta property="article:modified_time" content="2023-02-06T05:09:15.798Z">
<meta property="article:author" content="Resalia">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="系统">
<meta property="article:tag" content="折腾">
<meta property="article:tag" content="笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wynio.online/css/1.jpg">
    
    
      
        
          <link rel="shortcut icon" href="/css/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/css/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/css/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>ArchLinux安装指南</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
      <link rel="alternate" href="/atom.xml" title="Nocturne" type="application/atom+xml" />
    
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="icons.menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="icons.menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="icons.top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     --><!--
       --><li><a href="/categories/">分类</a></li><!--
     --><!--
       --><li><a href="/tags/">标签</a></li><!--
     --><!--
       --><li><a href="/about/">关于我</a></li><!--
     --><!--
       --><li><a href="/friends/">朋友</a></li><!--
     --><!--
       --><li><a href="/search/">搜索</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="上一篇" href="/posts/3166/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="下一篇" href="/posts/b180/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="返回顶部" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="分享文章" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://wynio.online/posts/ae4f/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://wynio.online/posts/ae4f/&text=ArchLinux安装指南"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://wynio.online/posts/ae4f/&title=ArchLinux安装指南"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://wynio.online/posts/ae4f/&is_video=false&description=ArchLinux安装指南"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ArchLinux安装指南&body=Check out this article: https://wynio.online/posts/ae4f/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://wynio.online/posts/ae4f/&title=ArchLinux安装指南"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://wynio.online/posts/ae4f/&title=ArchLinux安装指南"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://wynio.online/posts/ae4f/&title=ArchLinux安装指南"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://wynio.online/posts/ae4f/&title=ArchLinux安装指南"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://wynio.online/posts/ae4f/&name=ArchLinux安装指南&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://wynio.online/posts/ae4f/&t=ArchLinux安装指南"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">先前有尝试过用VMware装Archlinux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.1.</span> <span class="toc-text">安装前准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.2.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.3.</span> <span class="toc-text">首先确定自己的引导方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.4.</span> <span class="toc-text">联网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.5.</span> <span class="toc-text">分区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.6.</span> <span class="toc-text">选择镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.7.</span> <span class="toc-text">安装基本包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.8.</span> <span class="toc-text">配置Fstab</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.9.</span> <span class="toc-text">Chroot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.10.</span> <span class="toc-text">设置时区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.11.</span> <span class="toc-text">安装vim和sudo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.12.</span> <span class="toc-text">配置locale</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.13.</span> <span class="toc-text">设置语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.14.</span> <span class="toc-text">设置主机名字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.15.</span> <span class="toc-text">配置hosts文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.16.</span> <span class="toc-text">启用dhcpcd服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.17.</span> <span class="toc-text">设置Root密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.18.</span> <span class="toc-text">创建普通用户并设置密码并赋予其sudo权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.19.</span> <span class="toc-text">安装引导</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.20.</span> <span class="toc-text">安装后检查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.21.</span> <span class="toc-text">Reboot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.22.</span> <span class="toc-text">安装后配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.23.</span> <span class="toc-text">结束</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>
    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        ArchLinux安装指南
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Resalia</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-01-26T04:23:19.000Z" itemprop="datePublished">2021-01-26</time>
        
        (Updated: <time datetime="2023-02-06T05:09:15.798Z" itemprop="dateModified">2023-02-06</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
    </div>


      <!DOCTYPE html>
<html>
  <head>
    <title>jQCloud Example</title>
    <link rel="stylesheet" type="text/css" href="jqcloud.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript" src="jqcloud-1.0.4.js"></script>
    <script type="text/javascript">
      /*!
       * Create an array of word objects, each representing a word in the cloud
       */
      var word_array = [
          {text: "Lorem", weight: 15},
          {text: "Ipsum", weight: 9, link: "http://jquery.com/"},
          {text: "Dolor", weight: 6, html: {title: "I can haz any html attribute"}},
          {text: "Sit", weight: 7},
          {text: "Amet", weight: 5}
          // ...as many words as you want
      ];

      $(function() {
        // When DOM is ready, select the container element and call the jQCloud method, passing the array of words as the first argument.
        $("#example").jQCloud(word_array);
      });
    </script>
  </head>
  <body>
    <!-- You should explicitly specify the dimensions of the container element -->
    <div id="example" style="width: 550px; height: 350px;"></div>
  </body>
</html>
    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1><span id="先前有尝试过用vmware装archlinux">先前有尝试过用VMware装Archlinux</span></h1>
<p>因为整个系统都是在Cli下一步步引导安装</p>
<p>打算针对只会Windows的完全没接触过GNU/Linux的新手写一个零基础安装教学</p>
<p>这回不再使用VMware进行安装，直接上手实机进行EFI引导安装arch</p>
<p>内容可能会有一些错误，如有发现请即刻私信我</p>
<p>我也是没有过这类手动安装linux的经历，如果遇到什么问题也可以找我讨论<img src="/css/1.jpg" alt></p>
<p>另外，尽管这类教程Google上一搜一大片</p>
<p>但还是有些不全面的地方，这个教程会针对新人，保证仅通过复制代码不清楚代码作用的情况下也能顺利安装</p>
<p>这个教学不只是针对新人，也为了日后我速通archlinux。冷知识：目前世界记录是一分多钟</p>
<p>具体安装速度取决于网速，取决于你安装基本包的速度</p>
<p>**Tips：**本次安装使用y7000p进行实机安装</p>
<p>废话说完了，开始操作</p>
<h3><span id="安装前准备">安装前准备</span></h3>
<blockquote>
<p>首先把官方文档的链接放在下面，有能力的先对照着看</p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Installation_guide">https://wiki.archlinux.org/index.php/Installation_guide</a></p>
</blockquote>
<p>备份结束后就可以下载ISO了</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.archlinux.org/download/">https://www.archlinux.org/download/</a></p>
</blockquote>
<p>进入以后可以选择下载磁力链或种子<br>
<img src="/css/2.png" alt></p>
<p>当然我是选择的磁力链，迅雷下载也是比较快的</p>
<p>下载结束后也最好检验一下哈希值，这里就不详细说明怎么检验了</p>
<p>下载完镜像后可以使用rufus创建引导U盘，这里也不一一阐述</p>
<p>引导盘弄好后，就可以开始安装了</p>
<hr>
<h3><span id="安装">安装</span></h3>
<p>首先重启电脑进入BIOS界面</p>
<p><img src="/css/1.png" alt="另外如果出现这样的界面已经成功了"></p>
<p>然后设置你的U盘启动项为首位</p>
<p>这里选择第一个选项或是等待过后自动进入安装页面</p>
<p><img src="/css/3.png" alt="1"></p>
<h3><span id="首先确定自己的引导方式">首先确定自己的引导方式</span></h3>
<p>执行以下命令</p>
<p><code>ls /sys/firmware/efi/efivars</code></p>
<p>执行命令后，如果弹出一大堆东西，说明你是EFI引导，如果弹出下面的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls: cannot access &#x27;/sys/firmware/efi/efivars&#x27;: No such file or directory</span><br></pre></td></tr></table></figure>
<p>则说明你是以BIOS方式引导</p>
<p>两种不同的类型安装方式也会有所不同</p>
<p>本次安装采用EFI引导安装</p>
<hr>
<h3><span id="联网">联网</span></h3>
<p><strong>arch</strong>不能离线安装，需要通过联网来下载相关的包和组件，首先我们需要联网</p>
<p>如果你是有线网，输入以下命令获取IP地址</p>
<p><code>dhcpcd</code></p>
<p>然后再通过ping来判断是否联网，例如：</p>
<p><code>ping www.baidu.com</code></p>
<p>ping通了就说明连上网了</p>
<p>如果你是无线网，就执行以下命令：</p>
<p><code>iwctl</code></p>
<p>会进入一个以<strong>iwd</strong>开头的Cli环境中，然后执行</p>
<p><code>device list</code></p>
<p>会出现以下情况</p>
<p><img src="/css/4.png" alt="1"></p>
<p>有的人可能会像我这样，设备的powered是off的，这时候可以执行rfkill unblock wlan</p>
<p>再次<code>device list</code>即可</p>
<p>然后执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">station name scan # 使用wlan0进行无线网络扫描</span><br><span class="line">station name get-networks # 使用wlan0列出扫描到的网络</span><br><span class="line">station name connect WIFI # 使用wlan0连接到你家WIFI</span><br></pre></td></tr></table></figure>
<p>之后按要求输入密码，就能成功连上网了，执行下面命令以退出iwd</p>
<p><code>quit</code></p>
<p>之后再尝试<code>ping baidu.com</code></p>
<p>如果ping的通就连上了</p>
<p>目前我没遇到过什么问题，如遇到问题可以先上官方论坛查找，下方是官方wiki</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Wireless_network_configuration">https://wiki.archlinux.org/index.php/Wireless_network_configuration</a></p>
</blockquote>
<hr>
<h3><span id="分区">分区</span></h3>
<p>操作前一定要特别注意，一定不要操作失误，一定要清楚自己所做的每一步带来的影响，不然你数据就没了</p>
<p>首先查看目前的分区情况</p>
<p><code>fdisk -l</code></p>
<p><img src="/css/5.png" alt="1"></p>
<p>可以先清空磁盘，删除掉不需要的分区，需要注意的是不要删错，下面以我为例</p>
<p>执行<code>fdisk /dev/nvme0n1</code></p>
<p>然后输入<code>d</code>，一路回车，最后输入<code>w</code>保存</p>
<p>然后可以<strong>CTRL+C</strong>退出fdisk</p>
<p>下面对磁盘进行分区</p>
<p>我采用的是cfdisk进行，还是以我为例</p>
<p>执行<code>cfdisk /dev/nvme0n1</code></p>
<p>下方回车new选项，回车</p>
<p>大小输入300M，回车，创建一个EFI分区</p>
<p><img src="/css/38.png" alt="1"></p>
<p>此时已经创建了一个EFI分区</p>
<p>然后再选中剩下的free space再创建一个根分区</p>
<p>回车new创建完成后再回车write，输入yes，回车</p>
<p>然后回车quit离开</p>
<p>此时再<code>fdisk -l</code>就会发现已经分区完成了</p>
<p>格式化分区</p>
<p>执行以下命令对EFI分区和根分区进行格式化</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkfs.fat -F32 /dev/nvme0n1p1 #对EFI分区进行格式化</span><br><span class="line">mkfs.ext4 /dev/nvme0n1p2 #对根分区进行格式化</span><br></pre></td></tr></table></figure>
<p>格式化结束进行下一步</p>
<p>挂载</p>
<p>首先挂载根分区</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/你的根分区 /mnt</span><br></pre></td></tr></table></figure>
<p>随后创建EFI分区的挂载点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mnt/boot</span><br><span class="line">mkdir /mnt/boot/EFI</span><br></pre></td></tr></table></figure>
<p>挂载EFI分区</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/你的EFI分区 /mnt/boot/EFI</span><br></pre></td></tr></table></figure>
<p>挂载结束进行下一步</p>
<hr>
<h3><span id="选择镜像">选择镜像</span></h3>
<p>根据不同地区选择不同的镜像来加快下载速度</p>
<p><s>硬下也没关系，只不过可能要下到猴年马月</s></p>
<p>执行以下命令来编辑源文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure>
<p>找到标有China的镜像源，剪切到最前面的位置</p>
<p>找不到就直接手搓</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Server = http://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch</span><br><span class="line">Server = http://mirrors.zju.edu.cn/archlinux/$repo/os/$arch</span><br></pre></td></tr></table></figure>
<p>之后用<code>:wq</code>保存并退出即可<img src="/css/37.png" alt="1"></p>
<hr>
<h3><span id="安装基本包">安装基本包</span></h3>
<p>折腾了一堆东西，总算可以开始安装基本包了，本过程需要全程联网<s>废话</s></p>
<p>执行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacstrap /mnt base base-devel linux linux-firmware dhcpcd </span><br></pre></td></tr></table></figure>
<p>能不能速通就看网速了，arch安装一般就卡在网速上</p>
<p>不过镜像配置好是不会很久的</p>
<hr>
<h3><span id="配置fstab">配置Fstab</span></h3>
<p>生成一个Fstab文件通过UUID或者标签进行定义</p>
<p>执行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /mnt/etc/fstab</span><br></pre></td></tr></table></figure>
<p>检查输出的文件<code>/mnt/etc/fstab</code>是否正确</p>
<p>比如查看是否有/boot/EFI的文件，如果没出现说明挂载没成功</p>
<p>需要重新挂载后再生成一次</p>
<p>结束进行下一步</p>
<h3><span id="chroot">Chroot</span></h3>
<p>切换到根目录</p>
<p>执行<code>arch-chroot /mnt</code></p>
<p><img src="/css/7.png" alt="1"></p>
<hr>
<h3><span id="设置时区">设置时区</span></h3>
<p>输入以下指令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -sf /usr/share/zoneinfo/Region/City /etc/localtime # /Region/City改为自己城市和地区，例如/Asia/Shanghai</span><br><span class="line">hwclock --systohc #设置时间漂移</span><br></pre></td></tr></table></figure>
<p>结束到下一步</p>
<hr>
<h3><span id="安装vim和sudo">安装vim和sudo</span></h3>
<p>可以通过Archlinux的包管理器<strong>pacman</strong>下载，大部分情况只需要一行命令就帮你搞定依赖和安装的问题</p>
<p>输入以下指令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S vim sudo</span><br></pre></td></tr></table></figure>
<hr>
<h3><span id="配置locale">配置locale</span></h3>
<p>执行以下命令已编辑/etc/locale.gen文件</p>
<p><code>vim /etc/locale.gen</code></p>
<p>在文件中找到zh_CN.UTF-8 UTF-8和en_US.UTF-8 UTF-8</p>
<p>去掉开头的#号，并:<strong>wq</strong>保存退出</p>
<p>再执行<code>locale-gen</code></p>
<p>下一步</p>
<hr>
<h3><span id="设置语言">设置语言</span></h3>
<p><code>vim /etc/locale.conf</code></p>
<p>在里面输入<strong>LANG=en_US.UTF-8</strong></p>
<p><strong>:wq</strong>退出</p>
<hr>
<h3><span id="设置主机名字">设置主机名字</span></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 主机名 &gt; /etc/hostname</span><br></pre></td></tr></table></figure>
<hr>
<h3><span id="配置hosts文件">配置hosts文件</span></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure>
<p><img src="/css/39.png" alt="1"></p>
<p>其中的anastasia改为上一步你设置的主机名字</p>
<p><strong>:wq</strong>保存退出</p>
<hr>
<h3><span id="启用dhcpcd服务">启用dhcpcd服务</span></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable dhcpcd.service</span><br></pre></td></tr></table></figure>
<hr>
<h3><span id="设置root密码">设置Root密码</span></h3>
<p>输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure>
<p>按提示确认即可</p>
<hr>
<h3><span id="创建普通用户并设置密码并赋予其sudo权限">创建普通用户并设置密码并赋予其sudo权限</span></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -m -G wheel -s /bin/bash 用户名</span><br></pre></td></tr></table></figure>
<p>然后</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd 用户名</span><br></pre></td></tr></table></figure>
<p>接着</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visudo</span><br></pre></td></tr></table></figure>
<p>找到%wheel ALL=(ALL:ALL) ALL，并把其前面的注释#去掉，保存退出</p>
<hr>
<h3><span id="安装引导">安装引导</span></h3>
<p>安装grub和efibootmgr：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S grub efibootmgr</span><br></pre></td></tr></table></figure>
<p>部署grub：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-install --target=x86_64-efi --efi-directory=/boot/EFI</span><br></pre></td></tr></table></figure>
<p>生成配置文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<p>如果是EFI/GPT引导方式</p>
<p>如果引导或挂载没什么问题这里应该是正常的</p>
<hr>
<h3><span id="安装后检查">安装后检查</span></h3>
<p>输入以下指令检查是否成功生成各系统入口：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<p>如果没生成其他系统入口，请自行查阅</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/GRUB/Tips_and_tricks#Combining_the_use_of_UUIDs_and_basic_scripting">https://wiki.archlinux.org/index.php/GRUB/Tips_and_tricks#Combining_the_use_of_UUIDs_and_basic_scripting</a></p>
</blockquote>
<p>vans后就进行下一步</p>
<hr>
<h3><span id="reboot">Reboot</span></h3>
<p>一定要先确保所有步骤无误，否则重启后一切努力就会全部木大！</p>
<p>确保无误后先输入<code>exit</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>
<p>重启</p>
<p><img src="/css/8.png" alt="1"></p>
<p>如果你成功进入到这里了，恭喜你，你已经完成安装了</p>
<p>算算时间，看看你一共花了多长时间吧</p>
<hr>
<h3><span id="安装后配置">安装后配置</span></h3>
<p>查看显示设备</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep VGA</span><br></pre></td></tr></table></figure>
<p>安装通用显示驱动</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xf86-video-vesa</span><br></pre></td></tr></table></figure>
<p>安装xorg</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xorg</span><br></pre></td></tr></table></figure>
<p>安装字体</p>
<p>安装字体，不然有可能出现方块字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S wqy-microhei</span><br></pre></td></tr></table></figure>
<p>安装KDE桌面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S plasma kde-applications</span><br></pre></td></tr></table></figure>
<p>启用sddm显示和network网络管理器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable sddm</span><br><span class="line">systemctl enable NetworkManager</span><br></pre></td></tr></table></figure>
<p>重启<code>reboot</code></p>
<p>这个时候就进入到archlinux的图形化界面了</p>
<hr>
<h3><span id="结束">结束</span></h3>
<p>至此archlinux的图形化界面已经安装结束了</p>
<p>如果在安装过程中你们遇到什么问题可以上论坛找，也可以找我</p>
<p>整篇文章如有写错的地方还请指出</p>
<p>谢谢！<br>
<img src="/css/33.png" alt="1"></p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>加载评论需要在浏览器启用 JavaScript 脚本支持。</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/about/">关于我</a></li>
         
          <li><a href="/friends/">朋友</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">先前有尝试过用VMware装Archlinux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.1.</span> <span class="toc-text">安装前准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.2.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.3.</span> <span class="toc-text">首先确定自己的引导方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.4.</span> <span class="toc-text">联网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.5.</span> <span class="toc-text">分区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.6.</span> <span class="toc-text">选择镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.7.</span> <span class="toc-text">安装基本包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.8.</span> <span class="toc-text">配置Fstab</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.9.</span> <span class="toc-text">Chroot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.10.</span> <span class="toc-text">设置时区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.11.</span> <span class="toc-text">安装vim和sudo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.12.</span> <span class="toc-text">配置locale</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.13.</span> <span class="toc-text">设置语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.14.</span> <span class="toc-text">设置主机名字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.15.</span> <span class="toc-text">配置hosts文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.16.</span> <span class="toc-text">启用dhcpcd服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.17.</span> <span class="toc-text">设置Root密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.18.</span> <span class="toc-text">创建普通用户并设置密码并赋予其sudo权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.19.</span> <span class="toc-text">安装引导</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.20.</span> <span class="toc-text">安装后检查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.21.</span> <span class="toc-text">Reboot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.22.</span> <span class="toc-text">安装后配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.0.23.</span> <span class="toc-text">结束</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://wynio.online/posts/ae4f/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://wynio.online/posts/ae4f/&text=ArchLinux安装指南"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://wynio.online/posts/ae4f/&title=ArchLinux安装指南"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://wynio.online/posts/ae4f/&is_video=false&description=ArchLinux安装指南"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ArchLinux安装指南&body=Check out this article: https://wynio.online/posts/ae4f/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://wynio.online/posts/ae4f/&title=ArchLinux安装指南"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://wynio.online/posts/ae4f/&title=ArchLinux安装指南"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://wynio.online/posts/ae4f/&title=ArchLinux安装指南"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://wynio.online/posts/ae4f/&title=ArchLinux安装指南"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://wynio.online/posts/ae4f/&name=ArchLinux安装指南&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://wynio.online/posts/ae4f/&t=ArchLinux安装指南"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2020-2023
    Resalia
  </div>
  <div class="footer-ipv6"><a href="https://ipw.cn/ipv6webcheck/?site=wynio.online/" title="本站支持IPv6访问" target='_blank'>本站支持IPv6访问</a></div>
  <div class="footer-right">
  <a href="https://icp.gov.moe/?keyword=20230124" target="_blank">萌ICP备20230124号</a>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'Resalia';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>



<div>
    <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script>
  </div>
</body>
</html>
